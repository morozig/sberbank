(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,function(e,t,a){e.exports=a(19)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(5),c=a.n(s),d=(a(13),a(6)),i=(a(14),r.a.createContext({})),u=a(1),o=function(e,t){switch(t.type){case"SET_USERS":var a=Object(u.a)({},e);return a.users=t.payload,a;case"SET_COMMENTS":var n=Object(u.a)({},e);return n.comments=t.payload,n;case"SELECT_USER":var r=Object(u.a)({},e);return r.selectedUserId=t.payload,r;case"SET_SEARCH":var s=Object(u.a)({},e);return s.search=t.payload,s;case"CHECK_COMMENT":var c=Object(u.a)({},e),d=c.comments.find(function(e){return e.id===t.payload});return d&&(d.isSelected=!d.isSelected),c;case"SET_SYNCED":var i=Object(u.a)({},e);return i.isSynced=t.payload,i;case"SET_ERROR":var o=Object(u.a)({},e);return o.isError=t.payload,o;default:throw new Error("unknown action!")}},l=function(e){var t=Object(n.useContext)(i).dispatch;return r.a.createElement("select",{id:"UsersSelect",onChange:function(e){t({type:"SELECT_USER",payload:+e.target.value})},value:e.selectedUserId},r.a.createElement("option",{value:-1},"\u0418\u043c\u044f \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0442\u043e\u0440\u0430"),e.users.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))},m=function(e){var t=Object(n.useContext)(i).dispatch;return r.a.createElement("input",{id:"Search",onChange:function(e){t({type:"SET_SEARCH",payload:e.target.value})},value:e.search})},p=(a(15),function(e){var t=Object(n.useContext)(i).dispatch,a=e.comment.isSelected,s=e.search.length>0?e.comment.text.split(new RegExp("(".concat(e.search,")"),"gi")).filter(function(e){return e.length>0}):[e.comment.text];return r.a.createElement("div",{className:"CommentBlock"},r.a.createElement("div",{className:"CommentTopBar"},r.a.createElement("div",{className:"CommentTitle"},r.a.createElement("div",{className:"CommentUser"},e.comment.userName),r.a.createElement("div",{className:"CommentAdded"},"added a comment -"),r.a.createElement("div",{className:"CommentDate"},e.comment.date.toLocaleString("ru-RU"))),r.a.createElement("input",{type:"checkbox",checked:a,onChange:function(){t({type:"CHECK_COMMENT",payload:e.comment.id})}})),r.a.createElement("div",{className:"CommentText"},s.map(function(t,a){return r.a.createElement("span",{key:a,className:t.toLowerCase()===e.search.toLowerCase()?"CommentHighlight":void 0},t)})))}),E=(a(16),function(e){var t=e.comments.filter(function(t){return-1===e.selectedUserId||t.userId===e.selectedUserId}).filter(function(t){return e.search.length<=0||t.text.toLowerCase().includes(e.search.toLowerCase())});return r.a.createElement("div",null,r.a.createElement("div",{className:"CommentsTitle"},"Comments:"),t.slice(0,-1).map(function(t){return r.a.createElement(r.a.Fragment,{key:t.id},r.a.createElement(p,{comment:t,search:e.search}),r.a.createElement("hr",null))}),t.length>=1&&r.a.createElement(p,{comment:t[t.length-1],search:e.search}))}),f=(a(17),function(e){var t=Object(n.useContext)(i).dispatch;return r.a.createElement("div",{className:e.isEnabled?"DeleteButtonEnabled":"DeleteButtonDisabled",onClick:function(){e.isEnabled&&t({type:"SET_SYNCED",payload:!1})}},"Delete")}),D=a(2),v=a.n(D),w=a(3),x=[{id:1,name:"me"},{id:2,name:"\u0412\u0438\u043d\u043d\u0438-\u041f\u0443\u0445"},{id:3,name:"\u041f\u044f\u0442\u0430\u0447\u043e\u043a"},{id:4,name:"\u041a\u0440\u043e\u043b\u0438\u043a"}],h=[{id:1,userId:2,text:"\u041d\u0435\u0434\u0430\u0440\u043e\u043c \u0441\u043e\u043b\u043d\u0446\u0435 \u0432 \u0433\u043e\u0441\u0442\u0438 \u043a \u043d\u0430\u043c \u0412\u0441\u0435\u0433\u0434\u0430 \u043f\u0440\u0438\u0445\u043e\u0434\u0438\u0442 \u043f\u043e \u0443\u0442\u0440\u0430\u043c! \u0422\u0430\u0440\u0430\u043c-\u0442\u0430\u0440\u0430\u043c!",date:new Date("2019-07-21 07:45:01"),isDeleted:!1},{id:2,userId:3,text:"\u0422\u0430\u0440\u0430\u043c-\u043f\u0430\u0440\u0430\u043c!",date:new Date("2019-07-21 07:45:02"),isDeleted:!1},{id:3,userId:2,text:"\u041f\u043e\u0441\u043b\u0443\u0448\u0430\u0439, \u041f\u044f\u0442\u0430\u0447\u043e\u043a, \u0430 \u043d\u0435 \u043f\u043e\u0439\u0442\u0438 \u043b\u0438 \u043d\u0430\u043c \u0432 \u0433\u043e\u0441\u0442\u0438?",date:new Date("2019-07-21 07:45:03"),isDeleted:!1},{id:4,userId:3,text:"\u0412 \u0433\u043e\u0441\u0442\u0438?",date:new Date("2019-07-21 07:45:04"),isDeleted:!1},{id:5,userId:2,text:"\u0414\u0430, \u044f \u0432\u043e\u0442 \u0442\u0443\u0442 \u043f\u043e\u0434\u0443\u043c\u0430\u043b, \u0430 \u043d\u0435 \u043f\u043e\u0439\u0442\u0438 \u043b\u0438 \u043d\u0430\u043c \u0432 \u0433\u043e\u0441\u0442\u0438? \u041f\u043e-\u043c\u043e\u0435\u043c\u0443, \u043f\u043e\u0440\u0430 \u0447\u0435\u043c-\u043d\u0438\u0431\u0443\u0434\u044c \u043f\u043e\u0434\u043a\u0440\u0435\u043f\u0438\u0442\u044c\u0441\u044f!",date:new Date("2019-07-21 07:45:05"),isDeleted:!1},{id:6,userId:3,text:"\u0414\u0430\u0432\u0430\u0439!  \u0410 \u043a\u0443\u0434\u0430 \u043c\u044b \u043f\u043e\u0439\u0434\u0435\u043c?",date:new Date("2019-07-21 07:45:06"),isDeleted:!1},{id:7,userId:2,text:"\u042f \u0434\u0443\u043c\u0430\u044e, \u043a \u0442\u0435\u0431\u0435!",date:new Date("2019-07-21 07:45:07"),isDeleted:!1},{id:8,userId:3,text:"\u041f\u043e\u0439\u0434\u0435\u043c!",date:new Date("2019-07-21 07:45:08"),isDeleted:!1},{id:9,userId:2,text:"\u041a\u0442\u043e \u0445\u043e\u0434\u0438\u0442 \u0432 \u0433\u043e\u0441\u0442\u0438 \u043f\u043e \u0443\u0442\u0440\u0430\u043c, \u0422\u043e\u0442 \u043f\u043e\u0441\u0442\u0443\u043f\u0430\u0435\u0442 \u043c\u0443\u0434\u0440\u043e! \u0418\u0437\u0432\u0435\u0441\u0442\u043d\u043e \u0432\u0441\u0435, \u0442\u0430\u0440\u0430\u043c-\u043f\u0430\u0440\u0430\u043c \u041d\u0430 \u0442\u043e \u043e\u043d\u043e \u0438 \u0443\u0442\u0440\u043e!",date:new Date("2019-07-21 07:45:09"),isDeleted:!1},{id:10,userId:3,text:"\u041d\u0430 \u0442\u043e \u043e\u043d\u043e \u0438 \u0443\u0442\u0440\u043e!",date:new Date("2019-07-21 07:45:10"),isDeleted:!1},{id:11,userId:2,text:"\u041f\u043e\u0441\u043b\u0443\u0448\u0430\u0439, \u041f\u044f\u0442\u0430\u0447\u043e\u043a, \u0430 \u0443 \u0442\u0435\u0431\u044f \u0435\u0441\u0442\u044c \u0447\u0442\u043e-\u043d\u0438\u0431\u0443\u0434\u044c \u043f\u043e\u0435\u0441\u0442\u044c?  \u041d\u0443, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043c\u0435\u0434?",date:new Date("2019-07-21 07:45:11"),isDeleted:!1},{id:12,userId:3,text:"\u041d\u0435\u0442, \u043c\u0435\u0434\u0430 \u0443 \u043c\u0435\u043d\u044f \u043d\u0435\u0442!",date:new Date("2019-07-21 07:45:12"),isDeleted:!1},{id:13,userId:2,text:"\u041d\u0435\u0442?",date:new Date("2019-07-21 07:45:13"),isDeleted:!1},{id:14,userId:2,text:"\u0417\u043d\u0430\u0435\u0448\u044c, \u041f\u044f\u0442\u0430\u0447\u043e\u043a, \u043f\u043e\u0436\u0430\u043b\u0443\u0439, \u043c\u044b \u043a \u0442\u0435\u0431\u0435 \u043d\u0435 \u043f\u043e\u0439\u0434\u0435\u043c! \u0410 \u0442\u043e, \u0447\u0442\u043e \u0436\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442\u0441\u044f?  \u042f \u0438\u0434\u0443 \u0432 \u0433\u043e\u0441\u0442\u0438, \u0430 \u0442\u044b \u043d\u0435 \u0438\u0434\u0435\u0448\u044c!",date:new Date("2019-07-21 07:45:14"),isDeleted:!1},{id:15,userId:3,text:"\u041b\u0430\u0434\u043d\u043e!  \u0422\u043e\u0433\u0434\u0430 \u043f\u043e\u0439\u0434\u0435\u043c \u043a \u0442\u0435\u0431\u0435!",date:new Date("2019-07-21 07:45:15"),isDeleted:!1},{id:16,userId:2,text:"\u0414\u0430, \u0435\u0441\u043b\u0438 \u0433\u043e\u0441\u0442\u044c \u043f\u0440\u0438\u0448\u0435\u043b \u0441 \u0443\u0442\u0440\u0430, \u0415\u043c\u0443 \u0441\u043f\u0435\u0448\u0438\u0442\u044c \u043d\u0435 \u043d\u0430\u0434\u043e! \u041a\u0440\u0438\u0447\u0430\u0442 \u0445\u043e\u0437\u044f\u0435\u0432\u0430 \xab\u0423\u0440\u0430!\xbb \u0415\u043c\u0443 \u0443\u0436\u0430\u0441\u043d\u043e \u0440\u0430\u0434\u044b!",date:new Date("2019-07-21 07:45:16"),isDeleted:!1},{id:17,userId:3,text:"\u0415\u043c\u0443 \u0443\u0436\u0430\u0441\u043d\u043e \u0440\u0430\u0434\u044b!",date:new Date("2019-07-21 07:45:17"),isDeleted:!1},{id:18,userId:2,text:"\u041f\u043e\u0441\u0442\u043e\u0439, \u041f\u044f\u0442\u0430\u0447\u043e\u043a! \u042d\u0442\u043e \u0447\u0442\u043e \u0436\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442\u0441\u044f, \u0447\u0442\u043e \u0442\u0435\u043f\u0435\u0440\u044c \u044f \u043d\u0435 \u0438\u0434\u0443 \u0432 \u0433\u043e\u0441\u0442\u0438?",date:new Date("2019-07-21 07:45:18"),isDeleted:!1},{id:19,userId:3,text:"\u0410 \u0447\u0442\u043e \u0436\u0435 \u0434\u0435\u043b\u0430\u0442\u044c?",date:new Date("2019-07-21 07:45:19"),isDeleted:!1},{id:20,userId:3,text:"\u041f\u0443\u0445, \u044f \u043a\u0430\u0436\u0435\u0442\u0441\u044f, \u043f\u0440\u0438\u0434\u0443\u043c\u0430\u043b! \u0414\u0430\u0432\u0430\u0439 \u043f\u043e\u0439\u0434\u0435\u043c \u043a \u043a\u043e\u043c\u0443-\u043d\u0438\u0431\u0443\u0434\u044c \u0434\u0440\u0443\u0433\u043e\u043c\u0443!",date:new Date("2019-07-21 07:45:20"),isDeleted:!1},{id:21,userId:2,text:"\u041f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e!  \u0410 \u043a \u043a\u043e\u043c\u0443?",date:new Date("2019-07-21 07:45:21"),isDeleted:!1},{id:22,userId:3,text:"\u0417\u0434\u0435\u0441\u044c, \u043a\u0430\u0436\u0435\u0442\u0441\u044f, \u043d\u0435\u0434\u0430\u043b\u0435\u043a\u043e \u0436\u0438\u0432\u0435\u0442 \u041a\u0440\u043e\u043b\u0438\u043a!",date:new Date("2019-07-21 07:45:22"),isDeleted:!1},{id:23,userId:2,text:"\u041f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e!  \u041c\u043e\u043b\u043e\u0434\u0435\u0446, \u041f\u044f\u0442\u0430\u0447\u043e\u043a! \u041a\u0440\u043e\u043b\u0438\u043a \u2013 \u044d\u0442\u043e \u0432\u043f\u043e\u043b\u043d\u0435 \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0430\u044f \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044f! \u0410 \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0430\u044f \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044f, \u044d\u0442\u043e \u0433\u0434\u0435 \u043d\u0430\u0441 \u043c\u043e\u0433\u0443\u0442 \u0447\u0435\u043c-\u043d\u0438\u0431\u0443\u0434\u044c \u0443\u0433\u043e\u0441\u0442\u0438\u0442\u044c!",date:new Date("2019-07-21 07:45:23"),isDeleted:!1},{id:24,userId:2,text:"\u042d\u0439, \u0435\u0441\u0442\u044c \u043a\u0442\u043e-\u043d\u0438\u0431\u0443\u0434\u044c \u0434\u043e\u043c\u0430?",date:new Date("2019-07-21 07:45:24"),isDeleted:!1},{id:25,userId:4,text:"\u041d\u0435\u0442!  \u0418 \u043d\u0435\u0437\u0430\u0447\u0435\u043c \u0442\u0430\u043a \u043e\u0440\u0430\u0442\u044c!?",date:new Date("2019-07-21 07:45:25"),isDeleted:!1},{id:26,userId:2,text:"\u041f\u0440\u043e\u0441\u0442\u0438\u0442\u0435, \u0430 \u0447\u0442\u043e \u0441\u043e\u0432\u0441\u0435\u043c \u043d\u0438\u043a\u043e\u0433\u043e \u043d\u0435\u0442 \u0434\u043e\u043c\u0430?",date:new Date("2019-07-21 07:45:26"),isDeleted:!1},{id:27,userId:4,text:"\u0421\u043e\u0432\u0441\u0435\u043c \u043d\u0438\u043a\u043e\u0433\u043e!",date:new Date("2019-07-21 07:45:27"),isDeleted:!1}],S=function(){var e=Object(w.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(w.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.filter(function(e){return!e.isDeleted}).map(function(e){var t=Object(u.a)({},e);return{id:t.id,userId:t.userId,text:t.text,timestamp:t.date.getTime()}}));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(w.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=h.find(function(e){return e.id===t}))){e.next=6;break}return a.isDeleted=!0,e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),b=function(e,t){Object(n.useEffect)(function(){e.isSynced||Object(w.a)(v.a.mark(function a(){var n,r,s,c,d,i,o,l,m,p;return v.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!((n=e.comments.filter(function(e){return e.isSelected})).length>0)){a.next=29;break}r=!0,s=!1,c=void 0,a.prev=6,d=n[Symbol.iterator]();case 8:if(r=(i=d.next()).done){a.next=15;break}return o=i.value,a.next=12,I(o.id);case 12:r=!0,a.next=8;break;case 15:a.next=21;break;case 17:a.prev=17,a.t0=a.catch(6),s=!0,c=a.t0;case 21:a.prev=21,a.prev=22,r||null==d.return||d.return();case 24:if(a.prev=24,!s){a.next=27;break}throw c;case 27:return a.finish(24);case 28:return a.finish(21);case 29:return a.next=31,S();case 31:return l=a.sent,t({type:"SET_USERS",payload:l}),a.next=35,y();case 35:m=a.sent,p=m.map(function(e){var t=Object(u.a)({},e),a=t.id,n=t.userId,r=t.text,s=t.timestamp,c={id:a,userId:n,text:r,date:new Date(s)},d=l.find(function(t){return t.id===e.userId});return c.userName=d?d.name:"",c.isSelected=!1,c}),t({type:"SET_SYNCED",payload:!0}),t({type:"SET_COMMENTS",payload:p}),t({type:"SET_ERROR",payload:!1}),a.next=47;break;case 42:a.prev=42,a.t1=a.catch(0),console.log(a.t1),t({type:"SET_ERROR",payload:!0}),t({type:"SET_SYNCED",payload:!0});case 47:case"end":return a.stop()}},a,null,[[0,42],[6,17,21,29],[22,,24,28]])}))()},[e.comments,e.isSynced,t])},C={users:[],comments:[],selectedUserId:-1,search:"",isSynced:!1,isError:!1},O=function(){var e=Object(n.useReducer)(o,C),t=Object(d.a)(e,2),a=t[0],s=t[1];b(a,s);var c=a.isSynced&&a.comments.some(function(e){return e.isSelected});return r.a.createElement(i.Provider,{value:{dispatch:s}},r.a.createElement("div",{className:"App"},a.isError&&r.a.createElement("div",{className:"AppErorrsBar"},"Server error, please try again later"),r.a.createElement("div",{className:"AppTopBar"},r.a.createElement(l,{users:a.users,selectedUserId:a.selectedUserId}),r.a.createElement(m,{search:a.search})),r.a.createElement(E,{comments:a.comments,selectedUserId:a.selectedUserId,search:a.search}),r.a.createElement("div",{className:"AppButtonsBar"},r.a.createElement(f,{isEnabled:c}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[7,1,2]]]);
//# sourceMappingURL=main.916ea686.chunk.js.map